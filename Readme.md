# DocSim - Document Similarity
by Cathal Garvey, Copyright 2016, Released under the AGPLv3 or later.

[![Godoc Badge](https://godoc.org/github.com/cathalgarvey/comparator?status.svg)](https://godoc.org/github.com/cathalgarvey/comparator)

### About
This is a simple, amateur toolkit for estimating the similarity of bodies of text.
It provides an interface for comparators of this kind, and provides implementations
of that interface using what I believe to be sane primitives. Initially, this means
Minhash with vector length 500 (for e<0.05) using FarmHash and Spooky as 64-bit hashes.

If it sounds like I know what I'm talking about, don't be fooled. I only wrote this
because a certain news-scraping API I was using kept pushing out huge numbers of
duplicate churnalism articles from PR releases, sometimes plus-or-minus small
alterations or commentaries, and I wanted to have a convenient way to filter them.

Comments and educational feedback for this amateur implementor are very welcome.
PRs correcting stupid mistakes, or adding implementations, are even more welcome.

### Uses
* Plagiarism/Churnalism detection
* Simple deduplication for web-scrapers and small search engines
* Document management

### Usage
As per the interface, a `Comparator` provides the following methods, with the
behaviour of the more subjective methods being tuned by implementation details:

```go
// Comparator compares bodies of unicode text and provides answers.
type Comparator interface {
	// Signature for a given document. Length varies by tuning or implementation.
	Signature(document string) []byte
	// Compare two signatures as generated by the above.
	Compare(sig1, sig2 []byte) (float64, error)
	// Similarity from 0-1, minhash style, on two raw document strings.
	// This is built, of course, from the above two methods. It is assumed to
	// be implemented well enough to prevent errors occurring within Compare, so
	// it should eat or panic on errors instead.
	Similarity(document1, document2 string) float64
	// Same - According to this Comparator's preferences (implementation defined),
	// are these likely the same? e.g. the reference comparator, MinhashComparator,
	// can be set a "Threshold" above which articles are considered the same.
	Same(document1, document2 string) bool
}
```

So, some Comparators might be optimised for using the "Same" method, whereas others
might always return `false` and encourage users to only compare similarity.
Any comparator might be used to create and store Signatures (which are usually not
guaranteed to be unique, and are almost certainly only useful with the same comparator
and settings used to create them) for remembering similar documents when new ones
are observed.

For my purposes I wanted something I could create with a tunable cutoff distance
which would simply provide a "Same" answer for any two documents. For a simple
example of use, see `minhash_test.go`.

### Credits
This library is a simplification of far more advanced work by:

* [AlasdairF](https://github.com/AlasdairF)
* [dgryski](https://github.com/dgryski)
